<html>

<head>
    <title>Search Form</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
</head>

<body>
    <div class="booking-form-box">
        <div class="radio-btn">
            <input type="radio" class="btn" name="check"> <span>Roundtrip</span>
            <input type="radio" class="btn" name="check"> <span>One-way</span>
        </div>
        <div class="booking-form">
            <label>Leaving from </label>
            <input type="text" class="form-control" placeholder="City" id="leavecity">
            <label>Going to</label>
            <input type="text" class="form-control" placeholder="City" id="goingcity">
            <div class="input-grp">
                <label>Departing</label>
                <input type="date" class="form-control select-date" id="departingdate">
            </div>
            <div class="input-grp">
                <label>Returning</label>
                <input type="date" class="form-control select-date" id="returningdate">
            </div>
            <div class="input-grp">
                <label>Adults</label>
                <input type="number" class="form-control" value="1" id="adultqty">
            </div>
            <div class="input-grp">
                <label>Children</label>
                <input type="number" class="form-control" value="0" id="childrenqty">
            </div>
            <div class="input-grp">
                <label>Infants</label>
                <input type="number" class="form-control" value="0" id="infantsqty">
            </div>
            <div class="input-grp">
                <label>Travel class</label>
                <select class="custom-select" id="travelclass">
                    <option value="Economy class">Economy class</option>
                    <option value="Business class">Business class</option>
                    <option value="First class">First class</option>
                </select>
            </div>
            <div class="input-grp show-flights">
                <button type="button" class="btn btn-primary flight" onclick="handleclick();">Show Flights</button>

            </div>
        </div>
    </div>
</body>
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
<script>
    const handleclick=()=>{
        const leavecity=document.querySelector('#leavecity').value;
        const goingcity=document.querySelector('#goingcity').value;
        const departingdate=document.querySelector('#departingdate').value;
        const returningdate=document.querySelector('#returningdate').value;
        const adultqty=document.querySelector('#adultqty').value;
        const childrenqty=document.querySelector('#childrenqty').value;
        const infantsqty=document.querySelector('#infantsqty').value;
        const travelclass=document.querySelector('#travelclass').value;
        const dt={leavecity,goingcity,departingdate,returningdate,adultqty,childrenqty,infantsqty,travelclass}
       
        alert('clicked');
        console.log(JSON.stringify(dt))
        $.ajax({
        type: "POST",
        url: "/searchflights",
        
        body: {
            "leavecity" : leavecity,
            "goingcity": goingcity,
            "departindate" : departingdate,
            "returningdate" : returningdate,
            "adultqty" : adultqty,
        },
        contentType: 'application/json',
      
        success: function(response) {
               alert("success!"); 
               console.log(response);
        },
        error: function(jqXHR, textStatus, errorThrown) {
                alert("error");
                alert(errorThrown);
        },
    });
    }
</script>
</html>